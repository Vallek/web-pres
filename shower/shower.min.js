/**
 * Core for Shower HTML presentation engine
 * shower-core v2.1.0, https://github.com/shower/core
 * @copyright 2010-2017 Vadim Makeev, http://pepelsbey.net/
 * @license MIT
*/ !function(e){var t,i={NOT_RESOLVED:"NOT_RESOLVED",IN_RESOLVING:"IN_RESOLVING",RESOLVED:"RESOLVED"},n=function(){var d={trackCircularDependencies:!0,allowMultipleDeclarations:!0},c={},f=!1,p=[],v=function(){f=!1,m()},m=function(){var e,t=p,i=0;for(p=[];e=t[i++];)g(null,e.deps,[],e.cb)},g=function(e,t,i,n){var s=t.length;s||n([]);for(var r,l,h=[],a=function(e,t){if(t)return void n(null,t);if(!--s){for(var i,o=[],r=0;i=h[r++];)o.push(i.exports);n(o)}},u=0,d=s;u<d;){if("string"==typeof(r=t[u++])){if(!c[r])return void n(null,o(r,e));l=c[r].decl}else l=r;h.push(l),y(l,i,a)}},y=function(t,n,s){if(t.state===i.RESOLVED)return void s(t.exports);if(t.state===i.IN_RESOLVING)return void(d.trackCircularDependencies&&a(t,n)?s(null,r(t,n)):t.dependents.push(s));if(t.dependents.push(s),t.prev&&!d.allowMultipleDeclarations)return void S(t,h(t));d.trackCircularDependencies&&(n=n.slice()).push(t);var o=!1,u=t.prev?t.deps.concat([t.prev]):t.deps;t.state=i.IN_RESOLVING,g(t,u,n,function(i,n){return n?void S(t,n):(i.unshift(function(e,i){return o?void s(null,l(t)):(o=!0,void(i?S(t,i):w(t,e)))}),void t.fn.apply({name:t.name,deps:t.deps,global:e},i))})},w=function(e,n){e.exports=n,e.state=i.RESOLVED;for(var s,o=0;s=e.dependents[o++];)s(n);e.dependents=t},S=function(e,t){e.state=i.NOT_RESOLVED;for(var n,s=0;n=e.dependents[s++];)n(null,t);e.dependents=[]};return{create:n,define:function(e,n,s){s||(s=n,n=[]);var o=c[e];o||(o=c[e]={name:e,decl:t}),o.decl={name:e,prev:o.decl,fn:s,state:i.NOT_RESOLVED,deps:n,dependents:[],exports:t}},require:function(t,i,n){"string"==typeof t&&(t=[t]),f||(f=!0,u(v)),p.push({deps:t,cb:function(t,o){o?(n||s)(o):i.apply(e,t)}})},getState:function(e){var t=c[e];return t?i[t.decl.state]:"NOT_DEFINED"},isDefined:function(e){return!!c[e]},setOptions:function(e){for(var t in e)e.hasOwnProperty(t)&&(d[t]=e[t])},getStat:function(){var e,t={};for(var i in c)c.hasOwnProperty(i)&&(t[(e=c[i]).decl.state]||(t[e.decl.state]=[])).push(i);return t}}},s=function(e){u(function(){throw e})},o=function(e,t){return Error(t?'Module "'+t.name+'": can\'t resolve dependence "'+e+'"':'Required module "'+e+"\" can't be resolved")},r=function(e,t){for(var i,n=[],s=0;i=t[s++];)n.push(i.name);return n.push(e.name),Error('Circular dependence has been detected: "'+n.join(" -> ")+'"')},l=function(e){return Error('Declaration of module "'+e.name+'" has already been provided')},h=function(e){return Error('Multiple declarations of module "'+e.name+'" have been detected')},a=function(e,t){for(var i,n=0;i=t[n++];)if(e===i)return!0;return!1},u=function(){var t=[],i=function(e){return 1===t.push(e)},n=function(){var e=t,i=0,n=t.length;for(t=[];i<n;)e[i++]()};if("object"==typeof process&&process.nextTick)return function(e){i(e)&&process.nextTick(n)};if(e.setImmediate)return function(t){i(t)&&e.setImmediate(n)};if(e.postMessage&&!e.opera){var s=!0;if(e.attachEvent){var o=function(){s=!1};e.attachEvent("onmessage",o),e.postMessage("__checkAsync","*"),e.detachEvent("onmessage",o)}if(s){var r="__modules"+ +new Date,l=function(e){e.data===r&&(e.stopPropagation&&e.stopPropagation(),n())};return e.addEventListener?e.addEventListener("message",l,!0):e.attachEvent("onmessage",l),function(t){i(t)&&e.postMessage(r,"*")}}}var h=e.document;if("onreadystatechange"in h.createElement("script")){var a=h.getElementsByTagName("head")[0],u=function(){var e=h.createElement("script");e.onreadystatechange=function(){e.parentNode.removeChild(e),e=e.onreadystatechange=null,n()},a.appendChild(e)};return function(e){i(e)&&u()}}return function(e){i(e)&&setTimeout(n,0)}}();"object"==typeof exports?module.exports=n():e.modules=n()}("undefined"!=typeof window?window:global),function(e){function t(){e.shower.modules.require("shower.defaultOptions",function(t){var s=e.hasOwnProperty("showerOptions"),o=e.shower.options,r=o.shower_selector||t.container_selector,l=document.querySelector(r),h=i.bind(this,l),a=void 0===o.auto_init||o.auto_init;if(!l)throw Error("Shower element with selector "+r+" not found.");("false"!==h("auto-init")||s&&a)&&(s||n.forEach(function(e){var t=h(e);null!=t&&(o[e.replace(/-/g,"_")]=t)}),e.shower.modules.require(["shower"],function(e){e.init({container:l,options:o})}))})}function i(e,t){return e.dataset?e.dataset[t]:e.getAttribute("data-"+t)}var n=["debug-mode","slides-selector","hotkeys"];e.shower={modules:modules.create(),options:e.showerOptions||{}},/interactive|complete|loaded/.test(document.readyState)?t():document.addEventListener("DOMContentLoaded",t)}(window),shower.modules.define("shower",["shower.global"],function(e,t){e(t)}),shower.modules.define("Emitter",["emitter.Event","emitter.EventGroup","util.extend"],function(e,t,i,n){function s(e){e=e||{},this._context=e.context,this._parent=e.parent,this._listeners={}}function o(e,t){return e.priority-t.priority}n(s.prototype,{on:function(e,t,i,n){if(void 0===t)throw Error("Callback is not defined.");if(n=n||0,"string"==typeof e)this._addListener(e,t,i,n);else for(var s=0,o=e.length;s<o;s++)this._addListener(e[s],t,i,n);return this},off:function(e,t,i,n){if(n=n||0,"string"==typeof e)this._removeListener(e,t,i,n);else for(var s=0,o=e.length;s<o;s++)this._removeListener(e[s],t,i,n);return this},once:function(e,t,i,n){var s=function(o){this.off(e,s,this,n),i?t.call(i,o):t(o)};return this.on(e,s,this,n),this},emit:function(e,t){var i=t,n=this._listeners;i&&"function"==typeof i.get||(i=this.createEventObject(e,t,this._context)),i.isPropagationStopped()||(n.hasOwnProperty(e)&&this._callListeners(n[e],i),this._parent&&!i.isPropagationStopped()&&this._parent.emit(e,i))},createEventObject:function(e,i,s){var o={target:s,type:e};return new t(i?n(o,i):o)},setParent:function(e){this._parent!=e&&(this._parent=e)},getParent:function(){return this._parent},group:function(){return new i(this)},_addListener:function(e,t,i,n){var s={callback:t,context:i,priority:n};this._listeners[e]?this._listeners[e].push(s):this._listeners[e]=[s]},_removeListener:function(e,t,i,n){var s,o=this._listeners[e];if(o){for(var r=-1,l=0,h=o.length;l<h;l++)(s=o[l]).callback==t&&s.context==i&&s.priority==n&&(r=l);-1!=r&&(1==o.length?this._clearType(e):o.splice(r,1))}},_clearType:function(e){this._listeners.hasOwnProperty(e)&&delete this._listeners[e]},_callListeners:function(e,t){var i=e.length-1;for(e.sort(o);i>=0&&!t.defaultPrevented();){var n=e[i];n&&(n.context?n.callback.call(n.context,t):n.callback(t)),i--}}}),e(s)}),shower.modules.define("emitter.Event",["util.extend"],function(e,t){function i(e){this._data=e,this._preventDefault=!1,this._stopPropagation=!1}t(i.prototype,{get:function(e){return this._data[e]},preventDefault:function(){return this._preventDefault=!0,this._preventDefault},defaultPrevented:function(){return this._preventDefault},stopPropagation:function(){return this._stopPropagation=!0,this._stopPropagation},isPropagationStopped:function(){return this._stopPropagation}}),e(i)}),shower.modules.define("emitter.EventGroup",["util.extend"],function(e,t){function i(e){this.events=e,this._listeners=[]}t(i.prototype,{on:function(e,t,i){if(Array.isArray(e))for(var n=0,s=e.length;n<s;n++)this._listeners.push(e[n],t,i);else this._listeners.push(e,t,i);return this.events.on(e,t,i),this},off:function(e,t,i){if(Array.isArray(e))for(var n=0,s=e.length;n<s;n++)this._removeListener(e[n],t,i);else this._removeListener(e,t,i);return this},offAll:function(){for(var e=0,t=this._listeners.length;e<t;e+=3)this.events.off(this._listeners[e],this._listeners[e+1],this._listeners[e+2]);return this._listeners.length=0,this},_removeListener:function(e,t,i){for(var n=this._listeners.indexOf(e,0);-1!=n;)this._listeners[n+1]==t&&this._listeners[n+2]==i&&(this._listeners.splice(n,3),this.events.off(e,t,i)),n=this._listeners.indexOf(e,n)}}),e(i)}),shower.modules.define("Plugins",["Emitter","util.extend"],function(e,t,i){function n(e){this.events=new t({context:this}),this._showerGlobal=e,this._showerInstances=e.getInited(),this._plugins={},this._instances=[],e.events.on("init",this._onShowerInit,this)}i(n.prototype,{destroy:function(){this._showerGlobal.events.off("init",this._onShowerInit,this),this._plugins=null},add:function(e,t){if(this._plugins.hasOwnProperty(e))throw Error("Plugin "+e+" already exist.");return this._requireAndAdd({name:e,options:t}),this},remove:function(e){if(!this._plugins.hasOwnProperty(e))throw Error("Plugin "+e+" not found.");return delete this._plugins[e],this.events.emit("remove",{name:e}),this},get:function(e,t){var i;if(this._plugins[e]&&t)for(var n=0,s=this._instances.length;n<s;n++){var o=this._instances[n];o.plugin.name===e&&o.shower===t&&(i=o.instance)}return i},_requireAndAdd:function(e){shower.modules.require(e.name,(function(t){e.class=t,this._plugins[e.name]=e,this._instancePlugin(e)}).bind(this))},_instancePlugin:function(e){this._showerInstances.forEach(function(t){this._instance(e,t)},this),this.events.emit("add",{name:e.name})},_instanceFor:function(e){for(var t in this._plugins)this._plugins.hasOwnProperty(t)&&this._instance(this._plugins[t],e)},_instance:function(e,t){var i=e.options||t.options.get("plugin_"+e.name);this._instances.push({shower:t,plugin:e,instance:new e.class(t,i)})},_onShowerInit:function(e){var t=e.get("shower");this._instanceFor(t)}}),e(n)}),shower.modules.define("shower.global",["Emitter","Plugins"],function(e,t,i){var n=[],s={ready:function(e){return e&&(n.length?n.forEach(e):this.events.once("init",function(t){e(t.get("shower"))})),Boolean(n.length)},init:function(e){e=e||{},shower.modules.require(["Shower"],function(t){new t(e.container,e.options)})},getInited:function(){return n.slice()}};s.events=new t({context:s}),s.plugins=new i(s),s.events.on("notify",function(e){var t=e.get("shower");n.push(t),s.events.emit("init",e)}),e(s)}),shower.modules.define("Options",["Emitter","options.Monitor","util.Store","util.extend","util.inherit"],function(e,t,i,n,s,o){function r(e){r.super.constructor.apply(this,arguments),this.events=new t}o(r,n,{set:function(e,t){var i=[];if("string"==typeof e)r.super.set.call(this,e,t),i.push({name:e,value:t});else{var n=e||{};Object.keys(n).forEach(function(e){var t=n[e];r.super.set.call(this,e,t),i.push({name:e,value:t})})}return i.length&&this.events.emit("set",{items:i}),this},unset:function(e){return r.super.unset(this,e),this.events.emit("unset",{name:e}),this},getMonitor:function(){return new i(this)}}),e(r)}),shower.modules.define("options.Monitor",["util.extend"],function(e,t){function i(e){this._options=e,this._optionsEvents=e.events.group().on(["set","unset"],this._onOptionsChange,this),this._fieldsHanders={}}t(i.prototype,{destroy:function(){this._options=null,this._optionsEvents.offAll(),this._fieldsHanders=null},add:function(e,t,i){if(Array.prototype.isArray.call(null,e)){var n=e;for(var s in n)n.hasOwnProperty(s)&&this._addHandler(s,t,i)}else this._addHandler(e,t,i);return this},remove:function(e,t,i){if(Array.prototype.isArray.call(null,e)){var n=e;for(var s in n)n.hasOwnProperty(s)&&this._remodeHandler(s,t,i)}else this._remodeHandler(e,t,i);return this},getOptions:function(){return this._options},_onOptionsChange:function(e){("unset"===e.get("type")?[e.get("name")]:e.get("items")).forEach(function(e){this._fieldsHanders.hasOwnProperty(e)&&this._fieldsHanders[e].forEach(function(t){t.callback.call(t.context,this._options.get(e))})},this)},_addHandler:function(e,t,i){var n={callback:t,context:i};this._fieldsHanders.hasOwnProperty(fieldName)?this._fieldsHanders[fieldName].push(n):this._fieldsHanders[fieldName]=[n]},_remodeHandler:function(e,t,i){if(!this._fieldsHanders.hasOwnProperty(e))throw Error("Remove undefined handler for "+e+" field");var n=this._fieldsHanders[e],s=n.filter(function(e){return e.callback===t&&e.context===i})[0];if(!hander)throw Error("Hanlder for "+e+" not found.");n.splice(n.indexOf(s,1))}}),e(i)}),shower.modules.define("Shower",["Emitter","Options","shower.global","shower.defaultOptions","shower.Container","shower.Player","shower.Location","shower.slidesParser","util.extend"],function(e,t,i,n,s,o,r,l,h,a){function u(e,h){h=h||{},this.events=new t({context:this}),this.options=new i({},s,h);var a=e||this.options.get("container_selector");"string"==typeof a&&(a=document.querySelector(a)),this.player=new r(this),this.container=new o(this,a),this._slides=[],this._isHotkeysOn=!0,this._liveRegion=null,this._initSlides(),this._initLiveRegion(),this.options.get("debug_mode")&&(document.body.classList.add(this.options.get("debug_mode_classname")),console.info("Debug mode on")),this.options.get("hotkeys")||this.disableHotkeys(),this.location=new l(this),n.events.emit("notify",{shower:this}),this._playerListeners=this.player.events.group().on("activate",this._onPlayerSlideActivate,this)}a(u.prototype,{destroy:function(){this.events.emit("destroy"),this.location.destroy(),this.container.destroy(),this.player.destroy(),this._slides=[]},add:function(e){if(Array.isArray.call(null,e))for(var t=0,i=e.length;t<i;t++)this._addSlide(e[t]);else this._addSlide(e);return this},remove:function(e){var t;if("number"==typeof e)t=e;else{if(-1==this._slides.indexOf(e))throw Error("Slide not found");t=this._slides.indexOf(e)}return e=this._slides.splice(t,1)[0],this.events.emit("slideremove",{slide:e}),e.destroy(),this},get:function(e){return this._slides[e]},getSlides:function(){return this._slides.slice()},getSlidesCount:function(){return this._slides.length},getSlideIndex:function(e){return this._slides.indexOf(e)},disableHotkeys:function(){return this._isHotkeysOn=!1,this},enableHotkeys:function(){return this._isHotkeysOn=!0,this},isHotkeysEnabled:function(){return this._isHotkeysOn},getLiveRegion:function(){return this._liveRegion},updateLiveRegion:function(e){return this._liveRegion.innerHTML=e,this},_onPlayerSlideActivate:function(e){var t=e.get("slide");this.updateLiveRegion(t.getContent())},_initSlides:function(){var e=(this.options.get("slides_parser")||h)(this.container.getElement(),this.options.get("slides_selector"));this.add(e)},_addSlide:function(e){e.state.set("index",this._slides.length),this._slides.push(e),this.events.emit("slideadd",{slide:e})},_initLiveRegion:function(){var e=document.createElement("section");e.setAttribute("role","region"),e.setAttribute("aria-live","assertive"),e.setAttribute("aria-relevant","additions"),e.setAttribute("aria-label","Slide Content: Auto-updating"),e.className="region",document.body.appendChild(e),this._liveRegion=e}}),e(u)}),shower.modules.define("shower.Container",["Emitter","util.bound","util.extend"],function(e,t,i,n){function s(e,i){this.events=new t({context:this,parent:e.events}),this._shower=e,this._element=i,this._isSlideMode=!1,this.init()}n(s.prototype,{init:function(){var e=document.body.classList,t=this._shower.options,i=t.get("mode_full_classname"),n=t.get("mode_list_classname");e.contains(n)||e.contains(i)||e.add(n),this._setupListeners()},destroy:function(){this._clearListeners(),this._element=null,this._shower=null,this._isSlideMode=null},getElement:function(){return this._element},enterSlideMode:function(){var e=document.body.classList,t=this._shower.options;return e.remove(t.get("mode_list_classname")),e.add(t.get("mode_full_classname")),document.body.setAttribute("role","application"),this._applyTransform(this._getTransformScale()),this._isSlideMode=!0,this.events.emit("slidemodeenter"),this},exitSlideMode:function(){var e=document.body.classList,t=this._shower.options;return e.remove(t.get("mode_full_classname")),e.add(t.get("mode_list_classname")),document.body.removeAttribute("role","application"),this._applyTransform("none"),this._isSlideMode=!1,this.scrollToCurrentSlide(),this.events.emit("slidemodeexit"),this},isSlideMode:function(){return this._isSlideMode},scrollToCurrentSlide:function(){var e=this._shower.options.get("slide_active_classname"),t=this._element.querySelector("."+e);return t&&window.scrollTo(0,t.offsetTop),this},_setupListeners:function(){this._showerListeners=this._shower.events.group().on("slideadd",this._onSlideAdd,this).on("slideremove",this._onSlideRemove,this),window.addEventListener("resize",i(this,"_onResize")),document.addEventListener("keydown",i(this,"_onKeyDown")),window.addEventListener("wheel",i(this,"_onWheel"))},_clearListeners:function(){this._showerListeners.offAll(),window.removeEventListener("resize",i(this,"_onResize")),document.removeEventListener("keydown",i(this,"_onKeyDown")),window.removeEventListener("wheel",i(this,"_onWheel"))},_getTransformScale:function(){return"scale("+1/Math.max(document.body.clientWidth/window.innerWidth,document.body.clientHeight/window.innerHeight)+")"},_applyTransform:function(e){["WebkitTransform","MozTransform","msTransform","OTransform","transform"].forEach(function(t){document.body.style[t]=e})},_onResize:function(){this.isSlideMode()&&this._applyTransform(this._getTransformScale())},_onSlideAdd:function(e){e.get("slide").events.on("click",this._onSlideClick,this)},_onSlideRemove:function(e){e.get("slide").events.off("click",this._onSlideClick,this)},_onSlideClick:function(){this._isSlideMode||this.enterSlideMode()},_onKeyDown:function(e){if(this._shower.isHotkeysEnabled())switch(e.which){case 13:if(e.preventDefault(),!this.isSlideMode()&&e.metaKey){var t=e.shiftKey?0:this._shower.player.getCurrentSlideIndex();this._shower.player.go(t),this.enterSlideMode()}else e.shiftKey?this._shower.player.prev():this._shower.player.next();break;case 27:e.preventDefault(),this.exitSlideMode();break;case 116:if(!this.isSlideMode()&&e.shiftKey){e.preventDefault();var t=this._shower.player.getCurrentSlideIndex();this._shower.player.go(t),this.enterSlideMode()}break;case 80:!this.isSlideMode()&&e.altKey&&e.metaKey&&(e.preventDefault(),this.enterSlideMode())}},_onWheel:function(e){this.isSlideMode()&&(e.deltaY<0?this._shower.player.prev():e.deltaY>0&&this._shower.player.next())}}),e(s)}),shower.modules.define("shower.Location",["util.SessionStore","util.bound","util.extend"],function(e,t,i,n){function s(e){this._shower=e;var i=e.options.get("sessionstore_key")+"-shower.Location";this.state=new t(i,{isSlideMode:!1}),this._showerListeners=null,this._playerListeners=null,this._documentTitle=document.title,this._popStateProcess=null,this._setupListeners(),this._init()}n(s.prototype,{destroy:function(){this._clearListeners()},save:function(){this.state.set("isSlideMode",this._isSlideMode())},_init:function(){var e,t=this._shower,i=window.location.hash.substr(1),n=t.options.get("mode_full_classname");window.location.hash="",(this.state.get("isSlideMode")||document.body.classList.contains(n))&&t.container.enterSlideMode(),""!==i&&(e=this._getSlideById(i),t.player.go(void 0!==e.index?e.index:0))},_setupListeners:function(){var e=this._shower;this._playerListeners=e.player.events.group().on("activate",this._onSlideActivate,this),this._containerListener=e.container.events.group().on(["slidemodeenter","slidemodeexit"],this._onContainerSlideModeChange,this),window.addEventListener("popstate",i(this,"_onPopstate"))},_clearListeners:function(){window.removeEventListener("popstate",i(this,"_onPopstate")),this._playerListeners.offAll(),this._containerListener.offAll()},_getSlideById:function(e){for(var t,i,n=this._shower.getSlides(),s=n.length-1;s>=0;s--)if(n[s].getId()===e){t=n[s],i=s;break}return{slide:t,index:i}},_onSlideActivate:function(e){window.location.hash=e.get("slide").getId(),this._setTitle()},_onContainerSlideModeChange:function(){this._setTitle(),this.save()},_isSlideMode:function(){return this._shower.container.isSlideMode()},_onPopstate:function(){var e,t=this._shower,i=window.location.hash.substr(1),n=t.player.getCurrentSlide(),s=t.player.getCurrentSlideIndex();this._isSlideMode()&&-1===s?t.player.go(0):-1===s&&""!==window.location.hash&&t.player.go(0),n&&i!==n.getId()&&(e=this._getSlideById(i),t.player.go(e.index))},_setTitle:function(){var e=document.title,t=this._isSlideMode(),i=this._shower.player.getCurrentSlide();if(t&&i){var n=i.getTitle();document.title=n?n+" — "+this._documentTitle:this._documentTitle}else this._documentTitle!==e&&(document.title=this._documentTitle)}}),e(s)}),shower.modules.define("shower.Player",["Emitter","util.bound","util.extend"],function(e,t,i,n){function s(e){this.events=new t({context:this,parent:e.events}),this._shower=e,this._showerListeners=null,this._playerListeners=null,this._currentSlideNumber=-1,this._currentSlide=null,this.init()}n(s.prototype,{init:function(){this._showerListeners=this._shower.events.group().on("slideadd",this._onSlideAdd,this).on("slideremove",this._onSlideRemove,this).on("slidemodeenter",this._onSlideModeEnter,this),this._playerListeners=this.events.group().on("prev",this._onPrev,this).on("next",this._onNext,this).on("prevslide",this._onPrev,this).on("nextslide",this._onNext,this),document.addEventListener("keydown",i(this,"_onKeyDown"))},destroy:function(){this._showerListeners.offAll(),this._playerListeners.offAll(),document.removeEventListener("keydown",i(this,"_onKeyDown")),this._currentSlide=null,this._currentSlideNumber=null,this._shower=null},next:function(){return this.events.emit("next"),this},prev:function(){return this.events.emit("prev"),this},nextSlide:function(){return this.events.emit("nextslide"),this},prevSlide:function(){return this.events.emit("prevslide"),this},first:function(){return this.go(0),this},last:function(){return this.go(this._shower.getSlidesCount()-1),this},go:function(e){"number"!=typeof e&&(e=this._shower.getSlideIndex(e));var t=this._shower.getSlidesCount(),i=this._currentSlide;return e!=this._currentSlideNumber&&e<t&&e>=0&&(i&&i.isActive()&&i.deactivate(),i=this._shower.get(e),this._currentSlide=i,this._currentSlideNumber=e,i.isActive()||i.activate(),this.events.emit("activate",{index:e,slide:i})),this},getCurrentSlide:function(){return this._currentSlide},getCurrentSlideIndex:function(){return this._currentSlideNumber},_onPrev:function(){this._changeSlide(this._currentSlideNumber-1)},_onNext:function(){this._changeSlide(this._currentSlideNumber+1)},_changeSlide:function(e){this.go(e)},_onSlideAdd:function(e){e.get("slide").events.on("activate",this._onSlideActivate,this)},_onSlideRemove:function(e){e.get("slide").events.off("activate",this._onSlideActivate,this)},_onSlideActivate:function(e){var t=e.get("slide"),i=this._shower.getSlideIndex(t);this.go(i)},_onKeyDown:function(e){if(this._shower.isHotkeysEnabled()&&!/^(?:button|input|select|textarea)$/i.test(e.target.tagName)){this.events.emit("keydown",{event:e});var t,i=!1;switch(e.which){case 33:case 38:case 37:case 72:case 75:case 80:t=e.shiftKey?"prevSlide":"prev";break;case 34:case 40:case 39:case 76:case 74:case 78:t=e.shiftKey?"nextSlide":"next";break;case 36:i=!0,t="first";break;case 35:i=!0,t="last";break;case 32:this._shower.container.isSlideMode()&&(t=e.shiftKey?"prev":"next")}!t||!i&&(e.altKey||e.ctrlKey||e.metaKey)||(e.preventDefault(),this[t]())}},_onSlideModeEnter:function(){this._currentSlide||this.go(0)}}),e(s)}),shower.modules.define("shower.defaultOptions",function(e,t){e({container_selector:".shower",debug_mode:!1,debug_mode_classname:"debug",hotkeys:!0,sessionstore_key:"shower",slides_selector:".shower .slide",mode_full_classname:"full",mode_list_classname:"list",slide_title_element_selector:"H2",slide_active_classname:"active",slide_visited_classname:"visited"})}),shower.modules.define("shower.slidesParser",["Slide"],function(e,t){e(function e(i,n){var s=i.querySelectorAll(n);return(s=Array.prototype.slice.call(s)).map(function(e,i){var n=new t(e);return e.id||(e.id=i+1),n})})}),shower.modules.define("Slide",["shower.defaultOptions","Emitter","Options","slide.Layout","slide.layoutFactory","util.Store","util.extend"],function(e,t,i,n,s,o,r,l){function h(e,t,s){this.events=new i,this.options=new n(t),this.layout=null,this.state=new r({visited:0,index:null},s),this._content=e,this._isVisited=this.state.get("visited")>0,this._isActive=!1,this.init()}l(h.prototype,{init:function(){this.layout="string"==typeof this._content?new o.createLayout({content:this._content}):new s(this._content,this.options),this.layout.setParent(this),this._setupListeners()},destroy:function(){this._clearListeners(),this._isActive=null,this.options=null,this.layout.destroy()},activate:function(){this._isActive=!0;var e=this.state.get("visited");return this.state.set("visited",++e),this.events.emit("activate",{slide:this}),this},deactivate:function(){return this._isActive=!1,this.events.emit("deactivate",{slide:this}),this},isActive:function(){return this._isActive},isVisited:function(){return this.state.get("visited")>0},getTitle:function(){return this.layout.getTitle()},setTitle:function(e){return this.layout.setTitle(e),this},getId:function(){return this.layout.getElement().id},getContent:function(){return this.layout.getContent()},_setupListeners:function(){this.layoutListeners=this.layout.events.group().on("click",this._onSlideClick,this)},_clearListeners:function(){this.layoutListeners.offAll()},_onSlideClick:function(){this.activate(),this.events.emit("click",{slide:this})}}),e(h)}),shower.modules.define("slide.Layout",["Options","shower.defaultOptions","Emitter","util.bound","util.extend"],function(e,t,i,n,s,o){function r(e,s){this.options=new t({title_element_selector:i.slide_title_element_selector,active_classname:i.slide_active_classname,visited_classname:i.slide_visited_classname},s),this.events=new n,this._element=e,this._parent=null,this._parentElement=null,this.init()}o(r.prototype,{init:function(){var e=this._element.parentNode;e?this._parentElement=e:this.setParentElement(e)},destroy:function(){this.setParent(null)},setParent:function(e){this._parent!=e&&(this._clearListeners(),this._parent=e,this._parent&&this._setupListeners(),this.events.emit("parentchange",{parent:e}))},getParent:function(){return this._parent},setParentElement:function(e){e!=this._parentElement&&(this._parentElement=e,e.appendChild(this._element),this.events.emit("parentelementchange",{parentElement:e}))},getParentElement:function(){return this._parentElement},getElement:function(){return this._element},setTitle:function(e){var t=this.options.get("title_element_selector"),i=this._element.querySelector(t);i?i.innerHTML=e:((i=document.createElement(t)).innerHTML=e,this._element.insertBefore(i,this._element.firstChild))},getTitle:function(){var e=this.options.get("title_element_selector"),t=this._element.querySelector(e);return t?t.textContent:null},getData:function(e){var t=this._element;return t.dataset?t.dataset[e]:t.getAttribute("data-"+e)},getContent:function(){return this._element.innerHTML},_setupListeners:function(){this._slideListeners=this._parent.events.group().on("activate",this._onSlideActivate,this).on("deactivate",this._onSlideDeactivate,this),this._element.addEventListener("click",s(this,"_onSlideClick"),!1)},_clearListeners:function(){this._slideListeners&&this._slideListeners.offAll(),this._element.removeEventListener("click",s(this,"_onSlideClick"))},_onSlideActivate:function(){this._element.classList.add(this.options.get("active_classname"))},_onSlideDeactivate:function(){var e=this._element.classList;e.remove(this.options.get("active_classname")),e.add(this.options.get("visited_classname"))},_onSlideClick:function(){this.events.emit("click")}}),e(r)}),shower.modules.define("slide.layoutFactory",["slide.Layout","util.extend"],function(e,t,i){var n={};i(n,{createLayout:function(e){e=e||{};var s=n._createElement(i({content:"",contentType:"slide"},e));return new t(s)},_createElement:function(e){var t=document.createElement("section");return t.innerHTML=e.content,t.classList.add(e.contentType),t}}),e(n)}),shower.modules.define("util.SessionStore",["util.Store","util.inherit"],function(e,t,i){function n(e,t){this._storageKey=e;var i=this._loadFromStorage()||t;n.super.constructor.call(this,i)}i(n,t,{set:function(e,t){n.super.set.call(this,e,t),this._saveToStorage()},unset:function(e){n.super.unset.call(this,e),this._saveToStorage()},_saveToStorage:function(){window.sessionStorage.setItem(this._storageKey,JSON.stringify(this.getAll()))},_loadFromStorage:function(){var e=window.sessionStorage.getItem(this._storageKey);return e&&JSON.parse(e)}}),e(n)}),shower.modules.define("util.Store",["util.extend"],function(e,t){function i(e){this._data=e||{};for(var i=1,n=arguments.length;i<n;i++)t(this._data,arguments[i]||{})}t(i.prototype,{get:function(e,t){return this._data.hasOwnProperty(e)?this._data[e]:t},getAll:function(){return t({},this._data)},set:function(e,t){return this._data[e]=t,this},unset:function(e){if(!this._data.hasOwnProperty(e))throw Error(e+" not found.");return delete this._data[e],this},destroy:function(){this._data={}}}),e(i)}),shower.modules.define("util.bound",function(e){e(function e(t,i){return t["__bound_"+i]||(t["__bound_"+i]=t[i].bind(t))})}),shower.modules.define("util.extend",function(e){function t(e){for(var t=1,i=arguments.length;t<i;t++){var n=arguments[t];for(var s in n)n.hasOwnProperty(s)&&(e[s]=n[s])}return e}e(function e(i){if(!i)throw Error("util.extend: Target not found");return void 0===Object.assign?t.apply(null,arguments):Object.assign.apply(null,arguments)})}),shower.modules.define("util.inherit",["util.extend"],function(e,t){e(function(e,i,n){return e.prototype=Object.create(i.prototype),e.prototype.constructor=e,e.super=i.prototype,e.super.constructor=i,n&&t(e.prototype,n),e.prototype})}),shower.modules.define("shower-next",["shower","Emitter","util.extend"],function(e,t,i,n){function s(e,t){t=t||{},this.events=new i({context:this}),this._shower=e,this._elementsSelector=t.selector||r,this._elements=[],this._innerComplete=0,this._setupListeners(),-1!=this._shower.player.getCurrentSlideIndex()&&this._onSlideActivate()}var o="shower-timer",r=".next";n(s.prototype,{destroy:function(){this._clearListeners(),this._elements=null,this._elementsSelector=null,this._innerComplete=null,this._shower=null},next:function(){if(!this._elements.length)throw Error("Inner nav elements not found.");return this._innerComplete++,this._go(),this.events.emit("next"),this},prev:function(){if(!this._elements.length)throw Error("Inner nav elements not found.");return this._innerComplete--,this._go(),this.events.emit("prev"),this},getLength:function(){return this._elements=this._getElements(),this._elements.length},getComplete:function(){return this._innerComplete},_setupListeners:function(){var e=this._shower;this._showerListeners=e.events.group().on("destroy",this.destroy,this),this._playerListeners=e.player.events.group().on("activate",this._onSlideActivate,this).on("next",this._onNext,this).on("prev",this._onPrev,this);var i=t.plugins.get(o,e);i?this._setupTimerPluginListener(i):this._pluginsListeners=t.plugins.events.group().on("add",function(e){e.get("name")===o&&(this._setupTimerPluginListener(),this._pluginsListeners.offAll())},this)},_setupTimerPluginListener:function(e){e||t.plugins.get(o,this._shower),e.events.on("next",this._onNext,this,100)},_clearListeners:function(){this._showerListeners.offAll(),this._playerListeners.offAll(),this._pluginsListeners&&this._pluginsListeners.offAll()},_getElements:function(){var e=this._shower.player.getCurrentSlide().layout.getElement();return Array.prototype.slice.call(e.querySelectorAll(this._elementsSelector))},_onNext:function(e){var t=this._elements.length;this._shower.container.isSlideMode()&&t&&this._innerComplete<t&&(e.preventDefault(),this.next())},_onPrev:function(e){var t=this._elements.length,i=(this._shower.container.isSlideMode(),this._innerComplete);t&&i<t&&i>0&&(e.preventDefault(),this.prev())},_go:function(){for(var e=0,t=this._elements.length;e<t;e++){var i=this._elements[e];e<this._innerComplete?i.classList.add("active"):i.classList.remove("active")}},_onSlideActivate:function(){this._elements=this._getElements(),this._innerComplete=this._getInnerComplete()},_getInnerComplete:function(){return this._elements.filter(function(e){return e.classList.contains("active")}).length}}),e(s)}),shower.modules.require(["shower"],function(e){e.plugins.add("shower-next")}),shower.modules.define("shower-progress",["util.extend"],function(e,t){function i(e,t){t=t||{},this._shower=e,this._playerListeners=null,this._element=null,this._elementSelector=t.selector||".progress";var i=this._shower.container.getElement();this._element=i.querySelector(this._elementSelector),this._element&&(this._setupListeners(),this._element.setAttribute("role","progressbar"),this._element.setAttribute("aria-valuemin","0"),this._element.setAttribute("aria-valuemax","100"),this.updateProgress())}t(i.prototype,{destroy:function(){this._clearListeners(),this._shower=null},updateProgress:function(){var e,t=100/(this._shower.getSlidesCount()-1)*this._shower.player.getCurrentSlideIndex();this._element&&(this._element.style.width=t.toFixed(2)+"%",this._element.setAttribute("aria-valuenow",t.toFixed()),this._element.setAttribute("aria-valuetext","Slideshow Progress: "+t.toFixed()+"%"))},_setupListeners:function(){var e=this._shower;this._showerListeners=e.events.group().on("destroy",this.destroy,this),this._playerListeners=e.player.events.group().on("activate",this._onSlideChange,this)},_clearListeners:function(){this._showerListeners&&this._showerListeners.offAll(),this._playerListeners&&this._playerListeners.offAll()},_onSlideChange:function(){this.updateProgress()}}),e(i)}),shower.modules.require(["shower"],function(e){e.plugins.add("shower-progress")}),shower.modules.define("shower-timer",["shower","Emitter","util.extend"],function(e,t,i,n){function s(e){this.events=new i,this._shower=e,this._timer=null,this._showerListeners=null,this._playerListeners=null,this._pluginsListeners=null,this._setupListeners()}var o="shower-next";n(s.prototype,{destroy:function(){this._clearTimer(),this._clearListeners(),this._shower=null},run:function(e){this._initTimer(e)},stop:function(){this._clearTimer()},_setupListeners:function(){var e=this._shower;this.events.on("next",this._onNext,this),this._showerListeners=e.events.group().on("destroy",this.destroy,this),this._playerListeners=e.player.events.group().on("keydown",this._clearTimer,this).on("activate",this._onSlideActivate,this),this._nextPlugin=t.plugins.get(o,e),this._nextPlugin||(this._pluginsListeners=e.plugins.events.group().on("pluginadd",function(t){t.get("name")===o&&(this._nextPlugin=e.plugins.get(o),this._pluginsListeners.offAll())},this)),-1!=e.player.getCurrentSlideIndex()&&this._onSlideActivate()},_clearListeners:function(){this._showerListeners.offAll(),this._playerListeners.offAll()},_onSlideActivate:function(){this._clearTimer();var e=this._shower.player.getCurrentSlide();if(this._shower.container.isSlideMode()&&2>e.state.get("visited")){var t=e.layout.getData("timing");t&&/^(\d{1,2}:)?\d{1,3}$/.test(t)&&0!=(t=-1!==t.indexOf(":")?1e3*(60*parseInt((t=t.split(":"))[0],10)+parseInt(t[1],10)):1e3*parseInt(t,10))&&this._initTimer(t)}},_initTimer:function(e){var t=this.events,i=(this._shower,this._nextPlugin);i&&i.getLength()&&i.getLength()!=i.getComplete()&&(e/=i.getLength()+1),this._timer=setInterval(function(){t.emit("next")},e)},_clearTimer:function(){this._timer&&(clearInterval(this._timer),this._timer=null)},_onNext:function(){this._clearTimer(),this._shower.player.next()}}),e(s)}),shower.modules.require(["shower"],function(e){e.plugins.add("shower-timer")}),shower.modules.define("shower-touch",["util.extend"],function(e,t){function i(e,t){t=t||{},this._shower=e,this._setupListeners()}var n=["VIDEO","AUDIO","A","BUTTON","INPUT"];t(i.prototype,{destroy:function(){this._clearListeners(),this._shower=null},_setupListeners:function(){var e=this._shower;this._showerListeners=e.events.group().on("add",this._onSlideAdd,this),this._bindedTouchStart=this._onTouchStart.bind(this),this._bindedTouchMove=this._onTouchMove.bind(this),this._shower.getSlides().forEach(this._addTouchStartListener,this),document.addEventListener("touchmove",this._bindedTouchMove,!0)},_clearListeners:function(){this._showerListeners.offAll(),this._shower.getSlides().forEach(this._removeTouchStartListener,this),document.removeEventListener("touchmove",this._bindedTouchMove,!1)},_onSlideAdd:function(e){var t=e.get("slide");this._addTouchStartListener(t)},_addTouchStartListener:function(e){e.layout.getElement().addEventListener("touchstart",this._bindedTouchStart,!1)},_removeTouchStartListener:function(e){e.layout.getElement().removeEventListener("touchstart",this._bindedTouchStart,!1)},_onTouchStart:function(e){var t,i=this._shower,n=i.container.isSlideMode(),s=e.target,o=this._getSlideByElement(e.currentTarget);o&&(n&&!this._isInteractiveElement(s)&&(e.preventDefault(),(t=e.touches[0].pageX)>window.innerWidth/2?i.player.next():i.player.prev()),n||o.activate())},_onTouchMove:function(e){this._shower.container.isSlideMode()&&e.preventDefault()},_getSlideByElement:function(e){for(var t=this._shower.getSlides(),i=null,n=0,s=t.length;n<s;n++)if(e.id===t[n].getId()){i=this._shower.get(n);break}return i},_isInteractiveElement:function(e){return n.some(function(t){return t===e.tagName})}}),e(i)}),shower.modules.require(["shower"],function(e){e.plugins.add("shower-touch")});